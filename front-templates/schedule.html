{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
        integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />

    <script src="https://kit.fontawesome.com/23ec1d83f3.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" />
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
    <script src="https://unpkg.com/leaflet-control-geocoder@1.13.0/dist/Control.Geocoder.js"></script>

    <title>Schedule</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>

<body>
    <div id="box" class="flex">
        <nav class="flex-1/3 shadowd-md relative z-10 h-full bg-white p-3 text-black">
            <div class="justfy-between flex">
                <span class="text-2l m-1 font-mono font-bold">FohorUthau</span>
            </div>

            <div id="address-box" class="relative m-2">
                <input type="text" id="floating_filled"
                    class="peer block w-full border-0 border-b-2 border-gray-400 bg-gray-50 px-2.5 pb-2.5 pt-5 text-sm text-gray-900 focus:border-blue-400 focus:outline-none focus:ring-0"
                    placeholder=" " />
                <label for="floating_filled"
                    class="absolute left-2.5 top-4 z-10 origin-[0] -translate-y-4 scale-75 transform text-sm text-gray-500 duration-300 peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-focus:-translate-y-4 peer-focus:scale-75">Your
                    location</label>
            </div>

            <ul class="mt-8 font-sans font-light antialiased">
                <li class="list-none">
                    <a href="" class="block rounded-md px-4 py-2 hover:bg-gray-100"><i
                            class="fas fa-home mr-2"></i>Home</a>
                </li>
                <li class="list-none">
                    <a href="{% url 'schedule' %}" class="block rounded-md px-4 py-2 hover:bg-gray-100"><i
                            class="fas fa-calendar-alt mr-2"></i>Schedule</a>
                </li>

                <li class="list-none">
                    <a href="{% url 'complain' %}" class="block rounded-md px-4 py-2 hover:bg-gray-100"><i
                            class="fas fa-exclamation-circle mr-2"></i>Complaints</a>
                </li>
                <li class="list-none">
                    <a href="#settings" class="block rounded-md px-4 py-2 hover:bg-gray-100"><i
                            class="fas fa-info-circle mr-2"></i>About</a>
                </li>
            </ul>


            <div class="m-3 p-2">
                {% if user.is_authenticated %}
                <a href=""><i class="icon-user"><label>{{user.username}}</label></i></a>
                {% else %}
                <a href="/account/login/">
                    <button class=" custom-button rounded-full border border-black bg-transparent px-3 py-2 font-sans
                            font-semibold text-black hover:border-transparent hover:bg-black hover:text-white"><i
                            id=" icon" class="fa-solid fa-right-to-bracket"></i></button>
                </a>
                {% endif %}

                <a href="{% url 'signup' %}">
                    <button class="custom-button rounded-full border  border-black bg-transparent px-3 py-2
                    font-sans font-semibold text-black hover:border-transparent hover:bg-black hover:text-white"><i
                            class="fa-solid fa-user-plus"></i></button>
                </a>
            </div>
        </nav>

        <div id="schedules" class="m-5 h-[92vh] flex-1 overflow-hidden rounded-lg bg-gray-100">
            <div class="container mx-auto my-8">
                <h1 class="mb-8 text-center font-mono text-4xl font-bold">Truck Schedule</h1>

                <div id="containercontain" class="">
                    <div class="m-5 flex overflow-x-auto rounded-full bg-white text-gray-500">
                        <div id="titlesabcs" class="space-between flex w-full justify-between px-4 py-2">


                            <span class="p-2.5 font-sans font-bold">Date</span>
                            <span class="p-2.5 font-sans font-bold">Pick up time</span>
                            <span class="p-2.5 font-sans font-bold">Location</span>
                        </div>
                    </div>

                    {% for schedule in schedules %}
                    <div class="m-5 flex overflow-x-auto rounded-full bg-white text-gray-500">
                        <div onclick="openMapPopup()" data-location="{{schedule.location}}"
                            class="titles space-between flex justify-between w-full px-1 py-1">
                            <span class="p-2 font-sans text-gray-600">{{schedule.date}}</span>
                            <span class="p-2 font-sans">{{schedule.time}}</span>
                            <span class="p-2 font-sans">{{schedule.location}}</span>
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>
            <div id="map-popup" class="modal">
                <div id="map" style="height: 500px;"></div>
                <button onclick="closeMapPopup()">Close Map Popup</button>
            </div>

        </div>
    </div>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            var selectedLocation;
            var clickableDivs = document.querySelectorAll(".titles");
            var map = L.map('map').setView([27.709944374495038, 85.31732829466324], 17);
            var geocoder = L.Control.Geocoder.nominatim();
            function addMarkerToCity(city) {
                geocoder.geocode(city, function (results) {
                    var latlng = results[0].center;
                    map.setView(latlng, 17);
                    L.marker(latlng).addTo(map).bindPopup(city).openPopup();
                });
            }
            function openMapPopup(location) {
                const mapPopup = document.getElementById('map-popup');
                mapPopup.style.display = 'block';
                L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);
                // Use the location data for further customization
                addMarkerToCity(location);
            }

            function closeMapPopup() {
                const mapPopup = document.getElementById('map-popup');
                mapPopup.style.display = 'none';
            }

            clickableDivs.forEach(function (div) {
                div.addEventListener("click", function () {
                    var location = div.dataset.location;
                    openMapPopup(location);
                    selectedLocation = location;
                });
            });
            console.log(selectedLocation)
            var tham_coordinates = {
                "coordinates": [
                    [85.31018101189335, 27.717823526079513],
                    [85.31016244633298, 27.71788042104984],
                    [85.3101508827495, 27.717918468489714],
                    [85.31014071635758, 27.717959247901447],
                    [85.31012780881508, 27.71799040168395],
                    [85.31012656961337, 27.718019212783602],
                    [85.31012367624618, 27.718034913308884],
                    [85.31012524673503, 27.718054648353373],
                    [85.31012481976734, 27.718070524605906],
                    [85.3101229080022, 27.718089591557657],
                    [85.31012399877733, 27.71811190558431],
                    [85.3101450916011, 27.718122222142313],
                    [85.31017474239945, 27.7181289681304],
                    [85.31020399770489, 27.718138436214872],
                    [85.31022665265743, 27.718140694608778],
                    [85.31026502712473, 27.718147479248202],
                    [85.31029346361544, 27.718156093550363],
                    [85.31030866666538, 27.718158818612153],
                    [85.31032703663612, 27.71816518599232],
                    [85.31035048300203, 27.71817260361979],
                    [85.31038935751474, 27.71817872529178],
                    [85.31041637238275, 27.718187052117045],
                    [85.3104455558821, 27.71818924700213],
                    [85.31046579019551, 27.718194520889483],
                    [85.31048904615756, 27.718198922452544],
                    [85.31051829322769, 27.718203330081067],
                    [85.3105440938873, 27.718210394934104],
                    [85.31057044924864, 27.718217475398575],
                    [85.31059635796265, 27.718223239806832],
                    [85.31061833215239, 27.718229903931885],
                    [85.31064283145514, 27.718235245200304],
                    [85.3106648601298, 27.718239703042258],
                    [85.31069299694747, 27.718248189984422],
                    [85.31072165400508, 27.71825445785369],
                    [85.310743277472, 27.718258044968223],
                    [85.31076499487921, 27.718263882544107],
                    [85.31078352717708, 27.718263433125685],
                    [85.31079259739226, 27.718264781570383],
                    [85.31082801402465, 27.718261262680556],
                    [85.31085235858563, 27.718261262680556],
                    [85.31086428686945, 27.71825993847736],
                    [85.31089359200558, 27.718258614822474],
                    [85.31091345306686, 27.718257732690162],
                    [85.31093330865735, 27.718256850800927],
                    [85.310961106648, 27.718256409947017],
                    [85.31098094500607, 27.718255087748503],
                    [85.31101360881934, 27.71825068618773],
                    [85.31104022763515, 27.718244095191494],
                    [85.31106351112817, 27.718244095191494],
                    [85.31109064477602, 27.7182405855485],
                    [85.31111278449504, 27.718236641808076],
                    [85.31112960821184, 27.718236641808076],
                    [85.31114498400404, 27.71823752480914],
                    [85.31119620281976, 27.718235758840166],
                    [85.31121211616664, 27.718234876221203],
                    [85.31124447029964, 27.71823002616057],
                    [85.31126680445561, 27.71823002616057],
                    [85.3112955851633, 27.718230907443683],
                    [85.31132586862276, 27.718228264323372],
                    [85.3113462040323, 27.718223424271727],
                    [85.31137344725664, 27.7182190305774],
                    [85.31141505199969, 27.718218591720884],
                    [85.31143479697351, 27.718214206473505],
                    [85.3114578684494, 27.71820414322778],
                    [85.31148984385408, 27.7181980332997],
                    [85.31150949787815, 27.718194547171933],
                    [85.31153312991523, 27.71819280553929],
                    [85.31155933734289, 27.718194547171933],
                    [85.31158232740847, 27.718189325133622],
                    [85.31160831116034, 27.718188871234958],
                    [85.31166419603625, 27.718187997070032],
                    [85.31168005992595, 27.718185812708413],
                    [85.3116993943733, 27.718182320842004],
                    [85.31172660516046, 27.718178832802877],
                    [85.31175080876517, 27.718177090215747],
                    [85.31176759603284, 27.718175783901884],
                    [85.31180115353686, 27.718171433394318],
                    [85.31181742121493, 27.71816708883479],
                    [85.31186171111335, 27.718160149881157],
                    [85.3118877298034, 27.718154523135894],
                    [85.31189608886388, 27.718154523135894],
                    [85.31194273124152, 27.718151065481308],
                    [85.31199173030211, 27.718145886067546],
                    [85.3120167733075, 27.718145886067546],
                    [85.31203391482893, 27.7181445925371],
                    [85.3120730402361, 27.718136622558816],
                    [85.3120999999527, 27.71813352335687],
                    [85.31210902376154, 27.7181308692807],
                    [85.31213501754127, 27.71812468497204],
                    [85.31214857302297, 27.718117631788445],
                    [85.31216207453633, 27.718111912507766],
                    [85.31218393918886, 27.718108398031973],
                    [85.3121958931643, 27.718103571933867],
                    [85.31220783397708, 27.71809831541148],
                    [85.31222173222602, 27.71809306754004],
                    [85.312240556831, 27.718086083800586],
                    [85.31225931858967, 27.718086083800586],
                    [85.31227117731049, 27.71807868033315],
                    [85.31230466114101, 27.71806609056003],
                    [85.31233461201714, 27.71805786909144],
                    [85.31236394821019, 27.71804622253704],
                    [85.31239275655548, 27.718038481922918],
                    [85.31243821208386, 27.71802306807318],
                    [85.31245820246369, 27.718016643272804],
                    [85.3124710117342, 27.718012061861344],
                    [85.31250260016134, 27.718004288205805],
                    [85.31251334640103, 27.717999268060495],
                    [85.31252712585001, 27.71799334512866],
                    [85.31254294688739, 27.717985161919373],
                    [85.31256268410192, 27.717980624573244],
                    [85.31258458854813, 27.71796434934113],
                    [85.31260364587888, 27.717966153667717],
                    [85.31263181923845, 27.71796074370323],
                    [85.3126534649416, 27.717948155544804],
                    [85.31268802428343, 27.71794143201879],
                    [85.31271650175785, 27.717932042574546],
                    [85.31273642543937, 27.717924016209906],
                    [85.3127613240884, 27.717919565756958],
                    [85.31278213645209, 27.717910683301497],
                    [85.31280635588854, 27.71790094090916],
                    [85.31284785562445, 27.71789034651752],
                    [85.31287287753082, 27.717880226371776],
                    [85.3128954748326, 27.717874081940707],
                    [85.31291176761539, 27.717872766814423],
                    [85.31294344603776, 27.71786693789224],
                    [85.31296762055234, 27.71785622270221],
                    [85.31298922498456, 27.717845103483626],
                    [85.31302764120818, 27.717837564342176],
                    [85.31304557666931, 27.717832695499197],
                    [85.31307193215997, 27.717822098178274],
                    [85.31311506103555, 27.71781285422341],
                    [85.31316245848711, 27.71779925708978],
                    [85.31319000383803, 27.71779051325214],
                    [85.31322788829027, 27.71778397091252],
                    [85.31325264258322, 27.717769191253126],
                    [85.31327025922138, 27.71776868084801],
                    [85.31331811042645, 27.717756136337442],
                    [85.31334419937184, 27.717750775025692],
                    [85.31337373377147, 27.71774586831671],
                    [85.31340726746424, 27.71773208618842],
                    [85.31345557570086, 27.717731199046654],
                    [85.31349035054689, 27.71771703803624],
                    [85.3135306048776, 27.717700209869335],
                    [85.3135598094122, 27.717698893473653],
                    [85.31361226213852, 27.71769509802546],
                    [85.31364061175833, 27.717683310492006],
                    [85.31367346894393, 27.717670410639784],
                    [85.31367845663357, 27.717670857198627],
                    [85.31369402447757, 27.71766639438846],
                    [85.3137120332508, 27.717664165302054],
                    [85.31372707377858, 27.717658821786642],
                    [85.31373608514497, 27.71765570883352],
                    [85.31374410406187, 27.717651266982045],
                    [85.31375360897914, 27.71764638803205],
                    [85.31376755500037, 27.717645058695865],
                    [85.31376019382327, 27.717630472265398],
                    [85.31376228216067, 27.71761551303031],
                    [85.31374992145805, 27.7176067353801],
                    [85.31374649802768, 27.71760279918827],
                    [85.31374029518008, 27.717582764769887],
                    [85.31373653634557, 27.71756717333359],
                    [85.3137317885238, 27.71755380858619],
                    [85.31373051921645, 27.717537930741074],
                    [85.31372663411753, 27.71753579120066],
                    [85.31371663252531, 27.717529185892786],
                    [85.31371525489317, 27.71751374679276],
                    [85.31371046609308, 27.717496283098484],
                    [85.31370060306614, 27.717481466576203],
                    [85.31370088802817, 27.717456478166596],
                    [85.3137100652076, 27.717436096329706],
                    [85.31371062348012, 27.71742991879917],
                    [85.31371411518484, 27.717428155978084],
                    [85.31372013050208, 27.717421114395606],
                    [85.31373155076471, 27.717418477796713],
                    [85.31374844768527, 27.717406639972737],
                    [85.31376478000692, 27.71740051909721],
                    [85.31377565125285, 27.717398335917665],
                    [85.3137850305759, 27.71739440996248],
                    [85.31379045566047, 27.717392230966695],
                    [85.31379736187125, 27.717391359786603],
                    [85.31380769468979, 27.71738570292443],
                    [85.31381850476214, 27.71738049012758],
                    [85.31382491224923, 27.717380924200896],
                    [85.31383464949812, 27.717368792544164],
                    [85.31384347662515, 27.717366631052073],
                    [85.31386455743382, 27.717362744080035],
                    [85.31386964456897, 27.71737062323993],
                    [85.31399093014647, 27.717554212814278],
                    [85.31401845270614, 27.71755241874658],
                    [85.3140467744949, 27.717539888138802],
                    [85.31407261671302, 27.717533195306586],
                    [85.31409153213241, 27.717530967451367],
                    [85.31412050434488, 27.7175229080313],
                    [85.31414741073291, 27.717513223194118],
                    [85.31418064778728, 27.717508391759637],
                    [85.3141970108357, 27.71750093934901],
                    [85.31422469674538, 27.717490884319673],
                    [85.31424581556558, 27.717484976558353],
                    [85.31427234436057, 27.717474547195167],
                    [85.314294405557, 27.717459191075392],
                    [85.31430538874787, 27.717461444765704],
                    [85.31432721471822, 27.717451090767582],
                    [85.31434348384204, 27.717439873930147],
                    [85.31436449364685, 27.717440321856273],
                    [85.31437811968709, 27.717432715567526],
                    [85.31441369001601, 27.717424235619433],
                    [85.31443068722274, 27.717420671788148],
                    [85.31444217149419, 27.717418891352352],
                    [85.31446562196828, 27.71741355595536],
                    [85.31448056574601, 27.71740556944107],
                    [85.31450095110239, 27.717400699233323],
                    [85.31452871781977, 27.71739098096606],
                    [85.31455247748079, 27.717384811939013],
                    [85.31457102278506, 27.717379804090783],
                    [85.31459526028527, 27.717372649696657],
                    [85.3146178472112, 27.717369078448513],
                    [85.3146324224258, 27.71736551115879],
                    [85.31464451873552, 27.7173606125842],
                    [85.31467755460068, 27.71735438881123],
                    [85.3146935862876, 27.71734906372825],
                    [85.314715576487, 27.717341981250044],
                    [85.31472700904328, 27.717343444446342],
                    [85.31473845352906, 27.717342118950683],
                    [85.31476525275804, 27.717349901844486],
                    [85.31476311146332, 27.71737966846875],
                    [85.31476452897243, 27.71739892773111],
                    [85.31477651368084, 27.717411070596654],
                    [85.31478149589077, 27.717426426723165],
                    [85.31478296872842, 27.717443220840977],
                    [85.31479254229316, 27.71745781578096],
                    [85.31479835918913, 27.717482473568055],
                    [85.31479979526489, 27.71749328397088],
                    [85.31480022354157, 27.717511956787646],
                    [85.3148090811589, 27.717523733034966],
                    [85.31480707649217, 27.71753599159355],
                    [85.31482491264632, 27.717550940548378],
                    [85.3148154628513, 27.717570833915502],
                    [85.31483041925213, 27.71758416502216],
                    [85.31483145044672, 27.71760561035687],
                    [85.3148367848292, 27.71764340913063],
                    [85.31484605570023, 27.717662454926867],
                    [85.31485341131491, 27.717678996011543],
                    [85.31485882050544, 27.71769869591303],
                    [85.31486029056356, 27.717714985157656],
                    [85.31486674843455, 27.717727810598475],
                    [85.31486924582953, 27.717750044493712],
                    [85.31487575653836, 27.717762562911403],
                    [85.3148792770898, 27.7177715344813],
                    [85.3148823142738, 27.717784136683875],
                    [85.31488788475514, 27.717798599529857],
                    [85.31488942414376, 27.71780886441178],
                    [85.31488898252042, 27.71782707229842],
                    [85.31489105948606, 27.717842170847305],
                    [85.3148748849153, 27.71784521555587],
                    [85.31486455216964, 27.71784608601692],
                    [85.31484740237886, 27.717850441901263],
                    [85.31483848328236, 27.717849134509606],
                    [85.31482627706714, 27.717854803756893],
                    [85.31480817873222, 27.717863545431143],
                    [85.31479871303884, 27.717860045882674],
                    [85.31477649195978, 27.71786179517666],
                    [85.31477213237287, 27.717867925274447],
                    [85.31474048598443, 27.71787143348284],
                    [85.3147405514053, 27.717878021782695],
                    [85.31471775288605, 27.717879341074436],
                    [85.31469993489969, 27.7178890325484],
                    [85.31468106633474, 27.717896099370464],
                    [85.31465519053341, 27.71790229564992],
                    [85.31463974681083, 27.71790495486701],
                    [85.31461977966899, 27.71791072407369],
                    [85.31457978468438, 27.71791917467219],
                    [85.31456923111426, 27.717923631292123],
                    [85.31456314429022, 27.71792898739494],
                    [85.31453659876013, 27.717931668789888],
                    [85.31451791236503, 27.7179392782119],
                    [85.31450817893199, 27.717947804151706],
                    [85.31449449371729, 27.717953200574172],
                    [85.31447831689388, 27.717957253810425],
                    [85.3144642771449, 27.717956803200508],
                    [85.31443422995477, 27.71795500138569],
                    [85.31442943811209, 27.717962214672085],
                    [85.3144196425502, 27.717968539508263],
                    [85.31438208484093, 27.717971011980893],
                    [85.31435741859428, 27.717971011980893],
                    [85.31434606103932, 27.717974496207432],
                    [85.31430597240359, 27.71798584635708],
                    [85.31430730201441, 27.7180025080674],
                    [85.31429278313533, 27.718014840962255],
                    [85.3142826410621, 27.718030767658803],
                    [85.31427000575616, 27.718043209970304],
                    [85.3142507826758, 27.718057936189],
                    [85.3142410728438, 27.718068688594087],
                    [85.31423487933688, 27.718077676369518],
                    [85.31422011929584, 27.71808714050303],
                    [85.31421133044029, 27.718097535175133],
                    [85.31419704186106, 27.718105239481332],
                    [85.31419923037089, 27.71811796891214],
                    [85.3141872946972, 27.718129833872524],
                    [85.31418297783836, 27.718139448752524],
                    [85.31416663770756, 27.718158146463423],
                    [85.31415012342376, 27.71816924714014],
                    [85.31414385741732, 27.71818339298872],
                    [85.31413557852386, 27.71819372082102],
                    [85.31411400818655, 27.71821100911538],
                    [85.31410909420299, 27.718220123337986],
                    [85.31410268526383, 27.71822708510075],
                    [85.31409725723768, 27.718226649544334],
                    [85.31408340379801, 27.718238430558188],
                    [85.31405756493672, 27.718256843567076],
                    [85.31403060187523, 27.71827359487952],
                    [85.31401288568281, 27.718296215400002],
                    [85.31399323240038, 27.718307809002297],
                    [85.31396682906461, 27.718327524468464],
                    [85.31394998829177, 27.718340133626995],
                    [85.31393822930323, 27.718348265531517],
                    [85.31392587546651, 27.718358686065002],
                    [85.31391202273267, 27.718369209922628],
                    [85.31389863600083, 27.71837786527496],
                    [85.31388812611601, 27.71839020470432],
                    [85.31387491838268, 27.718399442781134],
                    [85.3138682669474, 27.718401278689768],
                    [85.31384676897011, 27.7184067926148],
                    [85.31384047461103, 27.718414701132872],
                    [85.31382091956027, 27.71842252025513],
                    [85.31379691148481, 27.718432975758972],
                    [85.31377081719944, 27.718440839986926],
                    [85.31374615282272, 27.718450039507815],
                    [85.31373529674687, 27.71845794494334],
                    [85.31372291121, 27.71846146473169],
                    [85.31366337370457, 27.718497368807263],
                    [85.31362143102001, 27.718524005453446],
                    [85.31355548494014, 27.718545328000104],
                    [85.31352494937875, 27.718575421663274],
                    [85.3135094515128, 27.71858956474071],
                    [85.31347112104203, 27.71861020291685],
                    [85.31343763877135, 27.718636066061023],
                    [85.31340811727898, 27.71865932867763],
                    [85.31338785006517, 27.71867993424712],
                    [85.31337345328586, 27.71869169850568],
                    [85.3133646116251, 27.718702274290408],
                    [85.31334504754096, 27.718709786099012],
                    [85.31332860161336, 27.718724417397112],
                    [85.31330848514551, 27.71873643736494],
                    [85.3132944305026, 27.718750740609224],
                    [85.31327626920182, 27.718769158185296],
                    [85.313262598346, 27.718785415135855],
                    [85.31323810484355, 27.718808127898242],
                    [85.3132237340194, 27.71881771394787],
                    [85.31320623102516, 27.718826869356448],
                    [85.31318195059555, 27.718840649968897],
                    [85.31317515433716, 27.7188549501509],
                    [85.31315797581613, 27.718867455319256],
                    [85.3131402134718, 27.718880007474155],
                    [85.3131255119921, 27.718892139391926],
                    [85.31310817341074, 27.718902908202068],
                    [85.31310056515792, 27.71890843326365],
                    [85.31307006680305, 27.718919729298293],
                    [85.31305469910922, 27.718928698947593],
                    [85.31302146649011, 27.718938166532837],
                    [85.31299397597888, 27.71895058030296],
                    [85.31297039163758, 27.718960812549753],
                    [85.31295334626492, 27.718971076885595],
                    [85.31291619726949, 27.718989130474014],
                    [85.31289642359496, 27.718998580615462],
                    [85.31286693211098, 27.71901529713108],
                    [85.31283880690745, 27.719025731327676],
                    [85.31279666298599, 27.71903908386186],
                    [85.31274224818719, 27.719052067078195],
                    [85.31273389031111, 27.71905940049193],
                    [85.31270273070123, 27.719074832508824],
                    [85.31268312998316, 27.719082387240874],
                    [85.31266249343537, 27.719091297555366],
                    [85.31265654220203, 27.719099337615432],
                    [85.31264951884816, 27.719105156610055],
                    [85.31263436746093, 27.71911367989179],
                    [85.31259973483208, 27.719118174726034],
                    [85.31258087141339, 27.71912042383363],
                    [85.31255054902857, 27.719129750726324],
                    [85.3125382833835, 27.719135617646515],
                    [85.31251369823087, 27.719144664116257],
                    [85.31248540247316, 27.719159643140642],
                    [85.3124785678321, 27.719176061624495],
                    [85.3124764208614, 27.71918475983432],
                    [85.31248048909504, 27.719190265206947],
                    [85.31248189326385, 27.71920545215592],
                    [85.31249354045815, 27.71921737134194],
                    [85.31248902364791, 27.719237333881566],
                    [85.31249719976904, 27.719255181219594],
                    [85.31250336844386, 27.719270428193212],
                    [85.31250750594603, 27.719282586663198],
                    [85.31251264593573, 27.719288004871373],
                    [85.31251477503974, 27.719302497094816],
                    [85.31252772989222, 27.71932070221183],
                    [85.3125319102769, 27.71932892728306],
                    [85.31253245211559, 27.71934867740248],
                    [85.31253903626123, 27.71936583578814],
                    [85.31254463468531, 27.71938042536756],
                    [85.31255481728829, 27.71939285575131],
                    [85.31255945065868, 27.719406226650776],
                    [85.31256360100468, 27.719420997918633],
                    [85.31257340455744, 27.71943808994351],
                    [85.3125734810896, 27.719448930805527],
                    [85.31257665077982, 27.71946207814115],
                    [85.31258241580161, 27.71947598798134],
                    [85.31258248474325, 27.719484216443234],
                    [85.31259099059014, 27.71951225437988],
                    [85.31259617649584, 27.719534937949845],
                    [85.31259883060352, 27.71954987327075],
                    [85.3126010324678, 27.719569303628404],
                    [85.31261135429276, 27.719587068544868],
                    [85.3126115056213, 27.719600903004036],
                    [85.31262492674097, 27.719615694418636],
                    [85.31261996402509, 27.719626944525913],
                    [85.3126216816276, 27.719641853759768],
                    [85.31262449745168, 27.719661838073222],
                    [85.31263128072078, 27.719669591735553],
                    [85.31263863557723, 27.71968011094002],
                    [85.31263492823143, 27.719709945276577],
                    [85.3126456392186, 27.7197358397232],
                    [85.31264466551755, 27.719742456061525],
                    [85.3126523585766, 27.719758834003514],
                    [85.3126519455626, 27.719773065235643],
                    [85.31265865091763, 27.719786463433664],
                    [85.3126618218152, 27.719800882715063],
                    [85.31266187813418, 27.719808070472297],
                    [85.31266962110101, 27.719817979355483],
                    [85.31267124591812, 27.719827918139003],
                    [85.31267980619305, 27.719863398605042],
                    [85.31268523047936, 27.719888186397085],
                    [85.31269112407978, 27.719905741013378],
                    [85.31270175343667, 27.719925717428723],
                    [85.31270036446256, 27.719938321983392],
                    [85.3127068645149, 27.719956142342838],
                    [85.31270652433784, 27.719968861824682],
                    [85.31272088574826, 27.71998399920743],
                    [85.31272156581798, 27.71999349465709],
                    [85.31272025394952, 27.720001117705777],
                    [85.31272906176741, 27.720025254200877],
                    [85.3127291864082, 27.720042346131052],
                    [85.31273646849644, 27.720057714473725],
                    [85.31274124687235, 27.720076342544317],
                    [85.31273678152951, 27.72009507603549],
                    [85.31274259540788, 27.720111152125227],
                    [85.31274689856156, 27.720128694545693],
                    [85.31274343051842, 27.72014539920106],
                    [85.31274667248152, 27.72015845569058],
                    [85.31273777188795, 27.720187276610943],
                    [85.31276111417895, 27.720217401521154],
                    [85.31276282204186, 27.720236306810023],
                    [85.31277172757586, 27.720263315559706],
                    [85.31277139128474, 27.720278020737894],
                    [85.31277999088968, 27.720293576785693],
                    [85.31277981684445, 27.72032067139743],
                    [85.31278076465952, 27.720334194717736],
                    [85.31278359840871, 27.720355220178078],
                    [85.31278451272806, 27.72039182389973],
                    [85.3127826476051, 27.720417126496457]
                ]
            }

            var jad_coordinates = {
                coordinates: [
                    [85.35157526866192, 27.67538736058502],
                    [85.35150109103967, 27.6754055774706],
                    [85.35145745714323, 27.675418826113003],
                    [85.3514075898355, 27.67543649096706],
                    [85.35138764291167, 27.675445323392992],
                    [85.35137205937718, 27.67544973960571],
                    [85.35133652891892, 27.675461332162854],
                    [85.35130847855856, 27.67547347674558],
                    [85.35128666161114, 27.675478997010018],
                    [85.3512554945421, 27.675494453748954],
                    [85.35122682084, 27.67550494224878],
                    [85.35119316040692, 27.675518742905695],
                    [85.35115700660691, 27.67553364761251],
                    [85.35112708622137, 27.675548552317935],
                    [85.35108719237542, 27.675566769176655],
                    [85.35103959561349, 27.675585521109923],
                    [85.3510121685934, 27.67559932175668],
                    [85.3509791315006, 27.675616986580835],
                    [85.35094796443298, 27.675636307480133],
                    [85.35091056395106, 27.67565783647737],
                    [85.35088126690721, 27.675672741165243],
                    [85.35085633325252, 27.675689853953173],
                    [85.35082952957413, 27.675704206611698],
                    [85.35080895930867, 27.675717455217182],
                    [85.35078838904474, 27.67573235989755],
                    [85.350773428852, 27.675743952424753],
                    [85.35074724851381, 27.675759961151513],
                    [85.35072667824983, 27.67577652189989],
                    [85.35070236793695, 27.675794186696052],
                    [85.35067431757506, 27.675816819711685],
                    [85.35065312247355, 27.675826756794308],
                    [85.35063629225698, 27.675841661459756],
                    [85.3506088652369, 27.675862638392417],
                    [85.35058580160592, 27.675883615320373],
                    [85.350548401124, 27.675912320584615],
                    [85.3505209741038, 27.67593053738267],
                    [85.35049354708366, 27.675954826442435],
                    [85.35045739328518, 27.675980771568177],
                    [85.35042996626504, 27.67600450859338],
                    [85.35040316258676, 27.6760271415654],
                    [85.35037635890836, 27.676056398815106],
                    [85.35034394513843, 27.67608731214743],
                    [85.35031464762392, 27.676107185542776],
                    [85.35027724714342, 27.67614361907154],
                    [85.35026104026713, 27.676164595946204],
                    [85.35023485993054, 27.67618998899897],
                    [85.35020805625214, 27.67621648609189],
                    [85.35018997935214, 27.67624519126865],
                    [85.35016130565009, 27.676266720145946],
                    [85.3501469687975, 27.676292113175634],
                    [85.35012515185002, 27.676316954176883],
                    [85.35010956831707, 27.67634069112833],
                    [85.35009086807531, 27.676363324031428],
                    [85.35007715456595, 27.676383748841715],
                    [85.35006094766669, 27.676401965587146],
                    [85.35003582219281, 27.67643580897112],
                    [85.35000153841798, 27.67648549090333],
                    [85.34999094161441, 27.67650757175413],
                    [85.34997785144532, 27.67652910058038],
                    [85.34996600795972, 27.676554493548394],
                    [85.34995167110867, 27.67657712640718],
                    [85.34993858093958, 27.67659920723949],
                    [85.34992611411224, 27.676617975943984],
                    [85.34991676399216, 27.67664392091224],
                    [85.34989120699731, 27.676686426486114],
                    [85.34987749348647, 27.676708507296297],
                    [85.34986752002465, 27.676725619921996],
                    [85.3498587930406, 27.676753221310364],
                    [85.34984196282403, 27.67678634250474],
                    [85.34983011933849, 27.676812287433037],
                    [85.34981889919464, 27.676831608120196],
                    [85.34981079575653, 27.676858657077304],
                    [85.34979583556373, 27.676890674200465],
                    [85.34978336873638, 27.676919379200072],
                    [85.34977775866372, 27.67694477207806],
                    [85.34976716186156, 27.676969612930932],
                    [85.34976155178896, 27.677007702227797],
                    [85.34973911303155, 27.677076150837806],
                    [85.3497384896898, 27.67710871991578],
                    [85.34972913956972, 27.677137976876466],
                    [85.34972602286251, 27.677155089434194],
                    [85.34972165947335, 27.677175514096476],
                    [85.34971729608259, 27.677190970595333],
                    [85.34971293269342, 27.677209739198204],
                    [85.34971106266966, 27.67722133156859],
                    [85.34970420591503, 27.677247828411325],
                    [85.34970046586608, 27.67725997279551],
                    [85.34969797250068, 27.677275429282446],
                    [85.34968986906398, 27.677293093836226],
                    [85.349691115746, 27.677307446283464],
                    [85.34968051894236, 27.67733559915679],
                    [85.34967864891865, 27.677363752022274],
                    [85.34966555874956, 27.67739135286402],
                    [85.34966742877481, 27.67741067344879],
                    [85.34967054520456, 27.67743644725435],
                    [85.34967303857007, 27.677466808159394],
                    [85.34967303857007, 27.677507657363506],
                    [85.34966867517932, 27.677546298489148],
                    [85.34966423585269, 27.677584834707943],
                    [85.34966423585269, 27.67765815961492],
                    [85.34965815884743, 27.677732157178838],
                    [85.34966271660215, 27.67779471871654],
                    [85.34965967809944, 27.677855262105922],
                    [85.34965967809944, 27.677881497563888],
                    [85.34967259148596, 27.67795494022009],
                    [85.34966651448059, 27.67801010189362],
                    [85.34965132196942, 27.6780346777347],
                    [85.34965208159548, 27.67809253017961],
                    [85.34965208159736, 27.678128856124488],
                    [85.34965208159736, 27.678173927179287],
                    [85.34966282876098, 27.678258612890616],
                    [85.34965675175266, 27.678309713846886],
                    [85.34965447287613, 27.678374965857145],
                    [85.34965447287613, 27.678450308336423],
                    [85.3496377611126, 27.678512869462352],
                    [85.349620732664, 27.67860740444918],
                    [85.34958047250075, 27.678670638184656],
                    [85.34955844335803, 27.678719745208852],
                    [85.34952274095497, 27.678745980469984],
                    [85.34952560490075, 27.678739482083245],
                    [85.34944003139526, 27.678754573762845],
                    [85.34938989610089, 27.67876062805051],
                    [85.34933596267962, 27.678744483283765],
                    [85.34930709690553, 27.678709502947612],
                    [85.34926607712094, 27.67866981370686],
                    [85.34915509028997, 27.678594642461377],
                    [85.34912090713681, 27.67855158968014],
                    [85.34914217650817, 27.678585897301886],
                    [85.3490859642086, 27.67855293501495],
                    [85.3490525406815, 27.678519300017555],
                    [85.34902671340825, 27.67850584601574],
                    [85.34896594335555, 27.678475574505896],
                    [85.34895530859723, 27.678454048093528],
                    [85.34890973105774, 27.678417722263035],
                    [85.34887782678106, 27.678393505036837],
                    [85.34883528774407, 27.67836861510301],
                    [85.34881325859959, 27.678350452175494],
                    [85.34877755619414, 27.678332289244906],
                    [85.34874869042005, 27.67831345360962],
                    [85.34871678677865, 27.678289909342197],
                    [85.34866209373308, 27.67826569208762],
                    [85.34864158383897, 27.678248201844283],
                    [85.34861575656748, 27.678226675387094],
                    [85.34857625603331, 27.67820313082011],
                    [85.34854359213045, 27.67818631326847],
                    [85.34850409159623, 27.678162768692758],
                    [85.34847598544826, 27.678141914921497],
                    [85.34843420603568, 27.67811837033544],
                    [85.34840002288234, 27.678095498447348],
                    [85.34835748384552, 27.67806522682382],
                    [85.34832178144012, 27.678046391142516],
                    [85.34827772315282, 27.67801275598994],
                    [85.34823366486376, 27.67799862922203],
                    [85.34818732770003, 27.677967684868648],
                    [85.34816757880861, 27.677945486255723],
                    [85.34809997212636, 27.677915214589774],
                    [85.34806730822163, 27.677881579396868],
                    [85.34802856731352, 27.677866779908356],
                    [85.34798906677935, 27.67784054444607],
                    [85.34793589298414, 27.6778149816831],
                    [85.34790474833363, 27.67779412784469],
                    [85.34785081491049, 27.677759819909284],
                    [85.34780751624936, 27.67773156630706],
                    [85.34777637159692, 27.677712057863573],
                    [85.34773231330962, 27.677683131544185],
                    [85.34771028416503, 27.677671022849907],
                    [85.34764799486203, 27.677632678642894],
                    [85.34760241839336, 27.677590971512757],
                    [85.3475636774852, 27.67756944492686],
                    [85.3475226576852, 27.67754186397417],
                    [85.34746188763256, 27.677503519721824],
                    [85.3474239063533, 27.677475938759954],
                    [85.3473861242266, 27.677476079231482],
                    [85.3473299119288, 27.677440425782848],
                    [85.34727977663442, 27.67740679044293],
                    [85.34723647795624, 27.677357010108352],
                    [85.34717601903515, 27.677336234077657],
                    [85.34713727812698, 27.67729385350762],
                    [85.34709929684482, 27.677266945201225],
                    [85.34701042064427, 27.67722389189585],
                    [85.34696408347656, 27.67718285669261],
                    [85.34693827393454, 27.677167645279695],
                    [85.34678027220224, 27.67707548439209],
                    [85.34669367487817, 27.676997450127686],
                    [85.3466344240777, 27.676962469232095],
                    [85.34655770188579, 27.676918743097247],
                    [85.34650528771675, 27.676881744046455],
                    [85.34646350830604, 27.67686089003068],
                    [85.34641337301161, 27.676827254512318],
                    [85.34624053350694, 27.67670511046464],
                    [85.34616988832016, 27.67666743862962],
                    [85.34606505998033, 27.676571913562],
                    [85.34599669367202, 27.676533568969205],
                    [85.34594427950111, 27.67650733318675],
                    [85.34590174046423, 27.676476388410904],
                    [85.34575133460851, 27.676358663655307],
                    [85.34566625653486, 27.67630686471496],
                    [85.34556784564069, 27.67625162090711],
                    [85.34546301729893, 27.67620385820196],
                    [85.34543643040132, 27.6761742587683],
                    [85.34538826485351, 27.67612532152839],
                    [85.34525921680637, 27.676052511767878],
                    [85.34516971394879, 27.675998133895135],
                    [85.3451239217884, 27.675961267525523],
                    [85.345053152086, 27.675913341225666],
                    [85.34499174896246, 27.675880161467887],
                    [85.34491161268306, 27.675836843432137],
                    [85.3448574946766, 27.675804585311354],
                    [85.34482106909383, 27.675772327181505],
                    [85.34476382889403, 27.67573269575115],
                    [85.34468641482829, 27.67565297159159],
                    [85.34458546392983, 27.675615183442616],
                    [85.34451469422748, 27.675567256991528],
                    [85.34443351721586, 27.675486150641348],
                    [85.344338810703, 27.675434537478296],
                    [85.34424514492167, 27.675382002626037],
                    [85.34410506416361, 27.675288214909656],
                    [85.3440665571203, 27.675247661638792],
                    [85.34401972422961, 27.675196970028367],
                    [85.34395207671713, 27.675160103387554],
                    [85.34384800362665, 27.67508544840291],
                    [85.34379492635043, 27.6750476600576],
                    [85.34368205031416, 27.67492445190922],
                    [85.3436133620736, 27.674875603486],
                    [85.3435842216079, 27.674823068365484],
                    [85.34353426652507, 27.674765003202836],
                    [85.34349471875021, 27.674721684727643],
                    [85.3434520487832, 27.674675601225104],
                    [85.34331467220136, 27.67456039237325],
                    [85.34326471711859, 27.674517995488515],
                    [85.3432314137292, 27.674484815306954],
                    [85.34317833645304, 27.67444149672062],
                    [85.34316272548864, 27.67442582829213],
                    [85.34313774794657, 27.674391726409326],
                    [85.34307218189633, 27.674343799408987],
                    [85.34305136727795, 27.674312462520646],
                    [85.34294402554877, 27.67419410188306],
                    [85.34287741877, 27.674128662986845],
                    [85.34281705637676, 27.674055850648372],
                    [85.34274420521382, 27.673971978147563],
                    [85.34271610598023, 27.673935111174828],
                    [85.34269008770798, 27.673908382552938],
                    [85.34264429554759, 27.673853081935746],
                    [85.34260058485029, 27.673815293164196],
                    [85.34256311853727, 27.673761835855842],
                    [85.34248610444934, 27.673709300199775],
                    [85.34245384334457, 27.673668746245355],
                    [85.34241221410787, 27.673627270694254],
                    [85.34236954414081, 27.673598698638386],
                    [85.34232895670499, 27.67355998812357],
                    [85.3422696350433, 27.673490862127153],
                    [85.34223216873028, 27.67346229003563],
                    [85.34218845803167, 27.673432796256463],
                    [85.3421645212212, 27.67339316397741],
                    [85.34213746221741, 27.673368278585514],
                    [85.34211248467534, 27.67334154982558],
                    [85.34208542567154, 27.673312977695005],
                    [85.34205836666757, 27.67328440555694],
                    [85.34202045057543, 27.673248410388553],
                    [85.3419902693384, 27.673206934682398],
                    [85.34195348188109, 27.673168985448328],
                    [85.34191705629956, 27.673144100005416],
                    [85.34189728241284, 27.6731173711906],
                    [85.34186293829185, 27.673084190583054],
                    [85.34184420513537, 27.67305930512086],
                    [85.34180777955385, 27.673034419653476],
                    [85.34178592420523, 27.673006769126943],
                    [85.34176510958685, 27.6729781969088],
                    [85.34174741765037, 27.67296068494737],
                    [85.34171723645443, 27.672930269347248],
                    [85.34170266622152, 27.672912757331204],
                    [85.34167248502558, 27.672883263403705],
                    [85.34165375186905, 27.672863908009077],
                    [85.34160587824687, 27.67281966709416],
                    [85.34158402289819, 27.67279754663059],
                    [85.34156008608647, 27.67277173941673],
                    [85.34153823073785, 27.67275054062935],
                    [85.34152574196679, 27.672733950271137],
                    [85.34149660150115, 27.67271275147702],
                    [85.34147578688277, 27.67268878761719],
                    [85.34145913518807, 27.67267035387532],
                    [85.34143415764606, 27.67263809481946],
                    [85.34141854725425, 27.67261873947281],
                    [85.34136963290166, 27.672567124955123],
                    [85.34134777755179, 27.67254039599858],
                    [85.34131655562555, 27.672510901970554],
                    [85.3413009446611, 27.672487859755122],
                    [85.3412718041954, 27.672470347668224],
                    [85.34124266373101, 27.672438088553903],
                    [85.34121560472715, 27.672397534224558],
                    [85.34118646426145, 27.67237910043349],
                    [85.34116460891153, 27.67234684129228],
                    [85.3411438040481, 27.672325203486125],
                    [85.34109905261926, 27.672285570805883],
                    [85.34106783069166, 27.672259763471118],
                    [85.34103973144073, 27.672223817525065],
                    [85.34100955024473, 27.672198931867385],
                    [85.3409939392804, 27.672174967894833],
                    [85.34096688027779, 27.672162064215172],
                    [85.3409512693134, 27.672150082225514],
                    [85.34093149542656, 27.672127039934068],
                    [85.34091484373192, 27.672115057941127],
                    [85.340892988382, 27.672091093950186],
                    [85.3408784181504, 27.672075425184048],
                    [85.34086384791755, 27.672056991338692],
                    [85.34083262599, 27.6720284188727],
                    [85.3408045262546, 27.671995237934524],
                    [85.3407785079823, 27.671971273917293],
                    [85.34075561190207, 27.671955605134556],
                    [85.34072959362982, 27.671920580787287],
                    [85.34068276073913, 27.67188832151008],
                    [85.34065362587245, 27.67186067237057],
                    [85.34061928175282, 27.671821961216096],
                    [85.34059950786474, 27.671802605633474],
                    [85.34057140813064, 27.671786015131346],
                    [85.34054226766489, 27.671750069035326],
                    [85.34051208646895, 27.67172333987888],
                    [85.34047670161777, 27.67169015884805],
                    [85.3404517240757, 27.67165421272047],
                    [85.34043090945733, 27.67163209202036],
                    [85.34038823949038, 27.67159891096179],
                    [85.34036534340913, 27.67157586855592],
                    [85.34033828440533, 27.671553747839994],
                    [85.34031122540136, 27.671536235603284],
                    [85.34027792201209, 27.671507663001165],
                    [85.34024045569902, 27.671480933785446],
                    [85.3402061125073, 27.671452361237428],
                    [85.34016864619429, 27.67142102351974],
                    [85.3401353428049, 27.67139060749163],
                    [85.34010412087866, 27.671369408436306],
                    [85.34007081748928, 27.671344522583453],
                    [85.3400354326381, 27.671315028232016],
                    [85.34000212924872, 27.6712864555721],
                    [85.33995031082526, 27.67124317636511],
                    [85.3399024179775, 27.671225711285345],
                    [85.33985734235614, 27.67119327613048],
                    [85.33981226673473, 27.671160840965285],
                    [85.33977564279411, 27.671134643324834],
                    [85.3397333843991, 27.67111094069233],
                    [85.33970239490941, 27.67108599054805],
                    [85.33965872790031, 27.671048565319865],
                    [85.33961224366658, 27.67102611017677],
                    [85.3395587163663, 27.671001160012324],
                    [85.33952772687826, 27.67096872479088],
                    [85.33947279096384, 27.670942527104344],
                    [85.33943898424684, 27.67091882443293],
                    [85.3394150378221, 27.670903854320287],
                    [85.33937841388143, 27.670885141676578],
                    [85.33933052103373, 27.670858943970757],
                    [85.33928403679835, 27.670830251237334],
                    [85.33924036979101, 27.670814033602042],
                    [85.3392136061417, 27.67079656845364],
                    [85.33917698219932, 27.6707778557916],
                    [85.33914599270958, 27.67076288565964],
                    [85.33910936876725, 27.67074292548125],
                    [85.33906851898621, 27.670721717786904],
                    [85.33905020701417, 27.670706747647216],
                    [85.33899386248919, 27.670681797409927],
                    [85.3389628729854, 27.67065559963733],
                    [85.33892624818031, 27.670644372656284],
                    [85.33886567781497, 27.670609442302535],
                    [85.33881496774086, 27.670581997017493],
                    [85.33877130073353, 27.670554551724777],
                    [85.33873890262981, 27.670542076589456],
                    [85.33867692365038, 27.67051338377277],
                    [85.33865156861503, 27.670492176033903],
                    [85.33860931022002, 27.67046722574834],
                    [85.33857832073033, 27.67045225557382],
                    [85.338534653723, 27.670424810248548],
                    [85.33847267474357, 27.670398612431583],
                    [85.33840647046702, 27.67037740470181],
                    [85.33835153455266, 27.670325009039686],
                    [85.33830927615764, 27.67031128636195],
                    [85.33824588856595, 27.67026887080158],
                    [85.3382078560112, 27.67024392046426],
                    [85.3381247478352, 27.67021772260472],
                    [85.33808108320062, 27.670195267770552],
                    [85.3379909319579, 27.67014786209363],
                    [85.33792755240762, 27.670105448864646],
                    [85.33787965955992, 27.67008174600889],
                    [85.33782894948757, 27.67005180555215],
                    [85.33778669109256, 27.67003059772368],
                    [85.33774302408523, 27.670010637411494],
                    [85.33769513123747, 27.669986934535217],
                    [85.33766414174778, 27.66997196429486],
                    [85.33763174364401, 27.66996073661329],
                    [85.33756131298736, 27.66993329116451],
                    [85.33752328043101, 27.669903350667155],
                    [85.3374880651026, 27.669880895289467],
                    [85.33743312918995, 27.66986467751329],
                    [85.33738946218085, 27.669840974605293],
                    [85.33735283824024, 27.66982101425772],
                    [85.3373063540048, 27.66980230142859],
                    [85.33724437502542, 27.669763628238996],
                    [85.3371795788214, 27.669722459989003],
                    [85.33713591181231, 27.669696262003697],
                    [85.33709787925767, 27.669671311536405],
                    [85.33704857779765, 27.669647608586473],
                    [85.33699082465688, 27.669622658107286],
                    [85.33695842655487, 27.669596460098063],
                    [85.33689081312275, 27.669565271984382],
                    [85.33682601691879, 27.669535331386143],
                    [85.33677953268341, 27.669499153152316],
                    [85.33670910786122, 27.669465471960322],
                    [85.33661473077808, 27.669420561019592],
                    [85.33658937574273, 27.669404343175103],
                    [85.33657669822338, 27.669398105541944],
                    [85.33655275180041, 27.669384382747793],
                    [85.33650485895271, 27.66935319457282],
                    [85.33647105223662, 27.669331986609492],
                    [85.33642456800294, 27.66931202616898],
                    [85.33637667515524, 27.66928333302934],
                    [85.33631610478983, 27.66924715471214],
                    [85.33626116887547, 27.669223451670916],
                    [85.3362090501891, 27.669183530746594],
                    [85.33616679179403, 27.669161075220245],
                    [85.33608086639168, 27.669123649332676],
                    [85.3360442424493, 27.669087470963348],
                    [85.33597662901724, 27.669078738251528],
                    [85.33593859646254, 27.66904380739726],
                    [85.33589633806753, 27.669023846904096],
                    [85.33582590741082, 27.66898392590757],
                    [85.3357709714964, 27.668955232681768],
                    [85.33567941965879, 27.66890408619227],
                    [85.33563997849012, 27.668871650347555],
                    [85.33559631148279, 27.668857927488034],
                    [85.33554701002271, 27.6688304817623],
                    [85.3355117946927, 27.668820501496654],
                    [85.33546953629758, 27.668798045895755],
                    [85.33541319177255, 27.668771847688802],
                    [85.3353878367356, 27.66875562974802],
                    [85.33534557834054, 27.668735669202945],
                    [85.33530754578584, 27.66870822344653],
                    [85.33525965293813, 27.668692005496283],
                    [85.3352033084114, 27.668659569588613],
                    [85.33515823279004, 27.668633371349244],
                    [85.33512020023534, 27.668615905852334],
                    [85.33506244709633, 27.668584717458003],
                    [85.33502159731358, 27.66856475688101],
                    [85.33496666140087, 27.668546043836727],
                    [85.33490468364147, 27.668502380490835],
                    [85.33485115634113, 27.66847867728734],
                    [85.3348074893338, 27.668449983929605],
                    [85.33474269573799, 27.66840756867228],
                    [85.3346708564672, 27.66837263760347],
                    [85.33456944523039, 27.668330225455776],
                    [85.33451450931767, 27.66830402713667],
                    [85.3344722509226, 27.66827533373238],
                    [85.33443562686301, 27.668250382887294],
                    [85.33440745460132, 27.66823166978918],
                    [85.33436519620625, 27.66820921406803],
                    [85.33429758277424, 27.66818176817931],
                    [85.33424687270019, 27.668156817365457],
                    [85.33419334539974, 27.668134361628162],
                    [85.33416939897683, 27.66810941080422],
                    [85.33412573196938, 27.668080717348815],
                    [85.33409192522862, 27.668062004214164],
                    [85.33404403238268, 27.66803830091517],
                    [85.33399754814724, 27.668019587780748],
                    [85.33395810697857, 27.668007112356037],
                    [85.3339214830379, 27.667994636930615],
                    [85.33388063325515, 27.667977171331614],
                    [85.33385527821815, 27.66795845818673],
                    [85.33381724566487, 27.66793225977669],
                    [85.33378343895191, 27.667912299081323],
                    [85.33373977193565, 27.667886100656872],
                    [85.33371047869878, 27.66787353623444],
                    [85.33372237032467, 27.667882563549895],
                    [85.33363364110255, 27.667840153743555],
                    [85.33356321044414, 27.667792747044956],
                    [85.33351672610996, 27.667757815731633],
                    [85.33345192990424, 27.667720389363552],
                    [85.33338713363025, 27.667684210502756],
                    [85.33335839755046, 27.667667813960165],
                    [85.33328233238944, 27.667625397353007],
                    [85.33323162231534, 27.667580485656075],
                    [85.3331527399796, 27.667534326391987],
                    [85.33306118012291, 27.667465711234428],
                    [85.33296821165777, 27.667409571526733],
                    [85.33290200683979, 27.667362164641318],
                    [85.33284988815166, 27.667313510184144],
                    [85.33279072640033, 27.667292301824247],
                    [85.33274565077892, 27.66724863754159],
                    [85.33269494070493, 27.66721245855078],
                    [85.33263719365846, 27.667160063787378],
                    [85.33258507497209, 27.667102676370476],
                    [85.33252309599271, 27.667032813388232],
                    [85.3324780203713, 27.666999129434046],
                    [85.33242449307096, 27.666920533501354],
                    [85.33237237438459, 27.666874373958493],
                    [85.33232307292462, 27.666834452176772],
                    [85.33227377146284, 27.66678080725859],
                    [85.33222447000276, 27.666699716053927],
                    [85.33217657715511, 27.666632347929905],
                    [85.33213431876169, 27.666566227324026],
                    [85.33206108276892, 27.66647640837469],
                    [85.33200051240357, 27.66640404987045],
                    [85.33192867310026, 27.6663217108279],
                    [85.33184274769792, 27.666249352221257],
                    [85.33180894097461, 27.66619321189191],
                    [85.33175400506019, 27.666133328839464],
                    [85.33169906914742, 27.666074693319587],
                    [85.33164826536688, 27.66600465731173],
                    [85.33159192084179, 27.665949764420205],
                    [85.33152712463612, 27.665868672598933],
                    [85.33146937149712, 27.66580878936942],
                    [85.33142852171437, 27.665763876925183],
                    [85.33137076857537, 27.66568028982782],
                    [85.33130878959594, 27.665609178365656],
                    [85.33123835893747, 27.665516858153467],
                    [85.33118201441255, 27.66544948930104],
                    [85.33111299236646, 27.665389605841085],
                    [85.33106088101903, 27.66531600224782],
                    [85.3310143967854, 27.665291050779715],
                    [85.33096086948495, 27.665222434212964],
                    [85.33090170766826, 27.665162550612607],
                    [85.33082141671679, 27.66508644851092],
                    [85.33077211525676, 27.66502781242862],
                    [85.33072140518271, 27.6649529578105],
                    [85.3306946415334, 27.66491553048185],
                    [85.33063970562068, 27.664863132200978],
                    [85.330608716131, 27.664814476631193],
                    [85.33057631802728, 27.664757087983418],
                    [85.33053405963398, 27.66470094688499],
                    [85.33051152234168, 27.66466850983062],
                    [85.33044813474822, 27.664574941241455],
                    [85.33040728496724, 27.664533771037597],
                    [85.33034530598786, 27.664467649161352],
                    [85.33030586891164, 27.66442772777542],
                    [85.33022416934796, 27.66431794038148],
                    [85.33018613679326, 27.66428675076139],
                    [85.33014528701221, 27.66422437149295],
                    [85.33009457693817, 27.664164487362484],
                    [85.33003964102545, 27.664107098372682],
                    [85.32999316097857, 27.664032244119483],
                    [85.32989455805682, 27.66393742739737],
                    [85.32983821353008, 27.663868809980826],
                    [85.32978891207006, 27.66381765878849],
                    [85.3297593311944, 27.663755279252314],
                    [85.32968608330964, 27.66370911837339],
                    [85.32965086798129, 27.663642995998245],
                    [85.32960579235987, 27.66359808266479],
                    [85.3295762114825, 27.66355566449886],
                    [85.32954100263169, 27.66348829830143],
                    [85.32946156345292, 27.663391713092963],
                    [85.32942529524729, 27.66334440554317],
                    [85.32938045455626, 27.663311115032954],
                    [85.32934582338623, 27.663284668334654],
                    [85.32929503052776, 27.663217093063068],
                    [85.32922908833496, 27.66313532678417],
                    [85.3291895230193, 27.663085682941343],
                    [85.329150617126, 27.663047719988086],
                    [85.32911303007569, 27.662999828243954],
                    [85.32909390826461, 27.662967122637895],
                    [85.32905434294895, 27.662918062765982],
                    [85.32900818341483, 27.66286141026697],
                    [85.32898312538236, 27.662824615329328],
                    [85.32895477023993, 27.662787236331994],
                    [85.32891784261199, 27.66274226470931],
                    [85.32888355267465, 27.66270196544616],
                    [85.32885387868907, 27.66267568331085],
                    [85.32883431589374, 27.66263767884928],
                    [85.32879870711048, 27.662596795501145],
                    [85.32877298965565, 27.662572265484457],
                    [85.32875518526407, 27.662542479028573],
                    [85.32873738087079, 27.662521453289884],
                    [85.32871759821376, 27.662494003014203],
                    [85.32869385901898, 27.662466552731814],
                    [85.32867143867418, 27.66244085458908],
                    [85.32865561254448, 27.662420996928716],
                    [85.32861538780838, 27.662380113499196],
                    [85.32857846055748, 27.66233455778047],
                    [85.32853493871107, 27.662276736879207],
                    [85.32847194311961, 27.662217035767682],
                    [85.32844622566745, 27.662181408711618],
                    [85.32841061688418, 27.662138188991165],
                    [85.32838490384592, 27.6620973069804],
                    [85.32832753413868, 27.66202488467958],
                    [85.32828467171294, 27.661990425665152],
                    [85.32818120524126, 27.66184020924173],
                    [85.32815285009718, 27.661808670430247],
                    [85.32808295137363, 27.66175552167094],
                    [85.32801623008282, 27.66166056915729],
                    [85.32796084091268, 27.661584643591212],
                    [85.32786309617825, 27.66145422086879],
                    [85.32781947986564, 27.661419979538962],
                    [85.32773819491723, 27.661369056517614],
                    [85.32763082523178, 27.661155991497537],
                    [85.32754161004448, 27.66104185338115],
                    [85.32743157798075, 27.660934739040414],
                    [85.32730766800017, 27.66083025855727],
                    [85.32722241793044, 27.660817966725375],
                    [85.32720060977357, 27.66090313150596],
                    [85.32720060977476, 27.660962834612988],
                    [85.32721151385869, 27.66103992351198],
                    [85.32721746153783, 27.661126844090234],
                    [85.32723431329481, 27.661192692966978],
                    [85.32726107785163, 27.661254151882304],
                    [85.32727099065022, 27.661294539151385],
                    [85.32729577285431, 27.661357497275148],
                    [85.32733145892803, 27.661504998392914],
                    [85.32738300548073, 27.661597186490567],
                    [85.32738498804042, 27.661652499311643],
                    [85.32738994444031, 27.661762246890135],
                    [85.32739291827926, 27.66175258910708],
                ],
            };

            var coordinateArrayJad = jad_coordinates.coordinates;
            var coordinateArrayThm = tham_coordinates.coordinates;


            var truckIcon = L.icon({
                iconUrl: '{% static "/truck.png" %}',
                iconSize: [50, 50], // Adjust the size as needed
                iconAnchor: [16, 16], // Adjust the anchor point as needed
            });
            if (selectedLocation == "jadibuti") {

                var marker = L.marker(coordinateArrayJad[0], { icon: truckIcon }).addTo(map);
            } else {
                var marker = L.marker(coordinateArrayThm[0], { icon: truckIcon }).addTo(map);
            }

            var index = 1;

            function updateMarker() {
                var coordinateArray;
                if (selectedLocation == "jadibuti") {
                    coordinateArray = coordinateArrayJad;
                } else {
                    coordinateArray = coordinateArrayThm;
                }
                if (index < coordinateArray.length) {
                    var coordinate = coordinateArray[index];
                    marker.setLatLng([coordinate[1], coordinate[0]]);
                    index++;
                } else {
                    clearInterval(intervalId); // Stop updating when all coordinates are covered
                }
            }

            var intervalId = setInterval(updateMarker, 1500);

            const closeButton = document.getElementById('map-popup').querySelector('button');
            closeButton.addEventListener('click', closeMapPopup);
            closeMapPopup();
        });
    </script>



</body>

</html>